# NarrativeGenEditorPage テストガイド

## 概要
このドキュメントでは、NarrativeGenEditorPageプロジェクトの主要機能のテスト手順を説明します。

## 開発サーバーの起動

```bash
cd editor-proto
npm install
npm run dev
```

サーバーが起動したら `http://localhost:5173` でアクセスできます。

## 主要機能のテスト手順

### 1. 基本エディタ機能

#### 1.1 テキスト編集
- [ ] エディタにテキストを入力できる
- [ ] 基本的な文字装飾（太字、斜体、下線、取り消し線）が動作する
- [ ] テキストの色変更（赤、青、緑）が動作する
- [ ] BubbleMenuが選択時に表示される

#### 1.2 見出しナビゲーション
- [ ] 見出し（H1-H6）を作成する
- [ ] 見出しナビゲーターが右側に表示される
- [ ] 見出しクリックでスムーズスクロールする
- [ ] 見出しの階層が正しく表示される

#### 1.3 選択肢ボタン機能
- [ ] `/choice` コマンドで選択肢ボタンを挿入できる
- [ ] 選択肢ボタンをクリックして編集モーダルが開く
- [ ] 選択肢のテキスト、スタイル、条件を編集できる
- [ ] 編集内容が保存される

### 2. Wiki機能

#### 2.1 自動Wiki抽出
- [ ] エディタにキャラクター名、場所名を入力する
- [ ] AutoWikiExtractorが候補を自動抽出する
- [ ] 抽出候補を承認してWikiエントリを作成できる
- [ ] 日本語の人名、場所名が正しく認識される

#### 2.2 Wikiエントリ管理
- [ ] WikiPanelでエントリ一覧が表示される
- [ ] カテゴリフィルター（キャラクター、場所、アイテムなど）が動作する
- [ ] 検索機能でエントリを絞り込める
- [ ] タグフィルターでエントリを絞り込める

#### 2.3 エントリ編集機能
- [ ] 「➕ 新規」ボタンで新規エントリ作成モーダルが開く
- [ ] エントリの編集ボタン（✏️）でエントリ編集モーダルが開く
- [ ] タイトル、カテゴリ、概要、詳細を編集できる
- [ ] タグの追加・削除ができる
- [ ] 関連項目を手動で設定できる
- [ ] 重要度、ネタバレレベルを設定できる

#### 2.4 関連項目自動生成
- [ ] エントリの関連ボタン（🔗）で関連項目生成モーダルが開く
- [ ] 関連項目候補が信頼度付きで表示される
- [ ] 候補を選択して関連項目を一括追加できる
- [ ] 双方向関係が正しく設定される

### 3. 没入感投稿システム

#### 3.1 投稿作成
- [ ] 「📝 投稿」ボタンで投稿システムモーダルが開く
- [ ] 6種類の投稿タイプを選択できる
  - キャラクター執筆
  - ルーモア・噂
  - 名言・引用
  - 日記・記録
  - 手紙・文書
  - ニュース・告知
- [ ] 投稿者タイプ（キャラクター、組織、匿名）を選択できる
- [ ] メタデータ（重要度、ネタバレレベル、対象読者）を設定できる

#### 3.2 投稿保存
- [ ] 投稿内容がWikiエントリとして保存される
- [ ] 投稿がMarkdown形式で整形される
- [ ] 投稿者情報が正しく記録される

### 4. レイアウト・UI

#### 4.1 4ペインレイアウト
- [ ] Scene、Editor、Preview、Wikiの4ペインが表示される
- [ ] 各ペインのサイズ調整ができる
- [ ] レスポンシブデザインが動作する

#### 4.2 Zenモード
- [ ] Zenモード切替ボタンが動作する
- [ ] Zenモード時にエディタが全画面表示される
- [ ] Zenモード時に不要なUIが非表示になる

#### 4.3 キーボードショートカット
- [ ] Ctrl+B で太字
- [ ] Ctrl+I で斜体
- [ ] Ctrl+U で下線
- [ ] Ctrl+Shift+X で取り消し線
- [ ] Ctrl+Z でZenモード切替

### 5. データ永続化

#### 5.1 自動保存
- [ ] エディタ内容が自動的に保存される
- [ ] ページリロード後も内容が復元される
- [ ] Wikiエントリが永続化される

#### 5.2 エクスポート機能
- [ ] エディタ内容をMarkdownでエクスポートできる
- [ ] Wikiデータをエクスポートできる

## パフォーマンステスト

### 1. 大量データ処理
- [ ] 100個以上のWikiエントリでも快適に動作する
- [ ] 長文（10,000文字以上）でもスムーズに編集できる
- [ ] 自動抽出が適切な時間内に完了する

### 2. メモリ使用量
- [ ] 長時間使用してもメモリリークが発生しない
- [ ] ブラウザの応答性が維持される

## ブラウザ互換性

### 対応ブラウザ
- [ ] Chrome（最新版）
- [ ] Firefox（最新版）
- [ ] Safari（最新版）
- [ ] Edge（最新版）

### モバイル対応
- [ ] スマートフォンでの表示が適切
- [ ] タブレットでの操作が快適
- [ ] タッチ操作に対応

## エラーハンドリング

### 1. 入力エラー
- [ ] 不正な入力に対して適切なエラーメッセージが表示される
- [ ] 必須項目の未入力時に警告が表示される

### 2. ネットワークエラー
- [ ] オフライン時の動作が適切
- [ ] 接続復旧時の同期が正常

## アクセシビリティ

### 1. キーボードナビゲーション
- [ ] Tabキーでの要素移動が適切
- [ ] Enterキーでのボタン操作が可能
- [ ] Escキーでのモーダル閉じが動作

### 2. スクリーンリーダー対応
- [ ] 適切なaria-labelが設定されている
- [ ] 見出し構造が論理的
- [ ] フォーム要素にラベルが関連付けられている

## セキュリティ

### 1. XSS対策
- [ ] ユーザー入力が適切にサニタイズされる
- [ ] HTMLインジェクションが防止される

### 2. データ保護
- [ ] ローカルストレージのデータが適切に管理される
- [ ] 機密情報の漏洩防止

## 既知の問題・制限事項

### 1. 現在の制限
- 画像アップロード機能は未実装
- リアルタイム共同編集は未対応
- 印刷機能は基本的なもののみ

### 2. 今後の改善予定
- パフォーマンスの最適化
- より高度なNLP機能
- プラグインシステムの導入

## テスト結果記録

### テスト実行日: [日付を記入]
### テスト実行者: [名前を記入]
### ブラウザ環境: [ブラウザとバージョンを記入]

#### 基本機能テスト結果
- [ ] 全ての基本機能が正常動作
- [ ] 一部機能に問題あり（詳細: ）
- [ ] 重大な問題あり（詳細: ）

#### パフォーマンステスト結果
- [ ] 良好
- [ ] 普通
- [ ] 改善が必要（詳細: ）

#### 総合評価
- [ ] 本番環境にデプロイ可能
- [ ] 軽微な修正後にデプロイ可能
- [ ] 重要な修正が必要

### 追加コメント
[テスト中に発見した問題や改善提案を記入]
